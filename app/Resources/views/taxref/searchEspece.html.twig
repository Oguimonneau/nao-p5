{% extends 'base.html.twig' %}

{% block body %}

    <!--
    ==================================================
        Global Page Section Start
    ================================================== -->
    <section class="global-page-header">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="block">
                        <h2>Chercher une Espèce</h2>
                        <ol class="breadcrumb">
                            <li>
                                <a href="index.html">
                                    <i class="ion-ios-home"></i>
                                    Home
                                </a>
                            </li>
                            <li class="active">Chercher une Espèce</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section id="review-section">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h2 class="subtitle wow fadeInDown" data-wow-duration="500ms" data-wow-delay=".3s">Observations en attente de validation</h2>
                    <table class="admin-table wow fadeInDown" data-wow-duration="500ms" data-wow-delay=".8s">
                        <thead class="admin-thead">
                        <tr>
                            <th class="col-xs-2">Image</th>
                            <th class="col-xs-10">Espèce</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for observation in observationsList %}
                            <tr tabindex="0"
                                role="button"
                                data-html="true"
                                data-toggle="popover"
                                popover-class="test"
                                data-placement="top"
                                data-trigger="hover"
                                title="<strong>{{ observation.taxref.nomVern }}</strong>"
                                data-content="
                                        <div class='img-container'>
                                            <img src='{{ asset('uploads/img/'~observation.photo.id|e~'.jpeg') }}'>
                                        </div>
                                        <p><strong>Utilisateur :</strong></p>
                                        <p>{{ observation.user }}</p>
                                        <p><strong>Notes :</strong></p>
                                        <p>{{ observation.note }}</p>
                                    ">
                                <td class="col-xs-1">{{ observation.id }}</td>
                                <td class="col-xs-1">{{ observation.date|date('d/m/Y') }}</td>
                                <td class="col-xs-2">{{ observation.user }}</td>
                                <td class="col-xs-6">{{ observation.taxref.nomVern }}</td>
                                <td class="col-xs-2">
                                    <a href="{{ path('NAO_back_office_modification', { 'id': observation.id }) }}" class="modification-link"><span class="glyphicon glyphicon-pencil"></span></a>
                                    <a href="#validate{{ observation.id }}" class="validation-link" data-toggle="modal">
                                        <span class="glyphicon glyphicon glyphicon-ok-sign"></span>
                                    </a>
                                    <a href="#delete{{ observation.id }}" class="deletion-link" data-toggle="modal">
                                        <span class="glyphicon glyphicon-remove-sign"></span>
                                    </a>
                                </td>
                            </tr>
                            <!-- MODAL WINDOW FOR VALIDATION -->
                            <div class="modal fade" id="validate{{ observation.id }}" role="dialog" aria-labelledby="modalTitle" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
                                            <h4 id="modalTitle" class="modal-title">Etes-vous certain de vouloir valider cette observation ?</h4>
                                        </div>
                                        <div class="modal-body">
                                            <p>Vous la retrouverez dans la liste des observations validées.</p>
                                            <p class="modal-button-margin text-right">
                                                <a href="{{ path('NAO_back_office_validation', { 'id': observation.id }) }}" class="validate-button">Valider</a>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- MODAL WINDOW FOR DELETION -->
                            <div class="modal fade" id="delete{{ observation.id }}" role="dialog" aria-labelledby="modalTitle" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
                                            <h4 id="modalTitle" class="modal-title">Etes-vous certain de vouloir supprimer cette observation ?</h4>
                                        </div>
                                        <div class="modal-body">
                                            <p>Une fois supprimée, il ne sera pas possible de la récupérer.</p>
                                            <p class="modal-button-margin text-right">
                                                <a href="{{ path('NAO_back_office_deletion', { 'page': 'validation', 'id': observation.id }) }}" class="delete-button">Supprimer</a>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% else %}
                            <tr>
                                <td colspan="5">
                                    Aucune observation n'est en attente de validation.
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                    {% if nbPages > 1 %}
                        <ul class="paging">
                            {% for p in range(1, nbPages) %}
                                <li {% if p == page %} class="active" {% endif %}>
                                    <a href="{{ path('NAO_back_office_validation_list', { 'page': p }) }}"> {{ p }}</a>
                                </li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>


{% endblock %}

